
function manjaroChroot()
{
  # Install needed package to CHROOT - Manjaro only 

  
  clear
  echo -e "Refreshing repos"
  $refresh
  echo -e "Repos are now Up-to-Date"
  userPrompt

  echo -e "Installing Needed package for Manjaro Chroot"
  $install mhwd-chroot

  clear
  echo -e "Its REALLY important to know your Manjaro partition, if not .. click Control + Z to exit, NOW "
  echo -e "After the next commannd is ran, choose your Manjaro partition"

  sudo mhwd-chroot-shell


  clear
  echo -e "Now you need to reinstall the kernel (Ex- for 4.14* you would type 'sudo pacman -S linux414' "
  echo -e "You MAY WANT to 'sudo grub-install /dev/sda ' "
  echo -e "I am not putting this code in on purpose to not have other people running this and possibly borking their system."
  echo -e
  echo -e "USE THIS KNOWLEDGE AT YOUR OWN RISK - This is what I have to do to get around the kernel panic on a failed kernel install, issue "
}

################################################################################################

function manjaroMenu()
{
  
  while [[ $x=1 ]]; do
    
    clear
    echo -e "Xmetal's Manjaro,  Post-Installation Script \n"
    echo -e "Please NOTE: Many of these tasks are predone on distros such as Antergos \n\n"
    echo -e "Please Select task: \n"


    echo -e   "1. \t Manjaro Rank-Mirrors"
    echo -e   "2. \t CHROOT into Manjaro [to be used from a live Media] "

    echo -e   "m. \t Return to Main Menu"
    echo -e   "q. \t Exit to Prompt\n\n"

    read -p   "Your Choice?:"  manjaroSelection


    case $manjaroSelection in

      1)  manjaroRankMirrors
          x=1 ;;

      2)  manjaroChroot
          x=1 ;;

      [mM])  clear 
            exit
            ;;

      [qQ])  quitScript   ;;

      * ) invalidSection ;;

      esac

  done

}


#######################################################################################
## Manjaro Related 

function manjaroRankMirrors()
{
  clear 
  echo -e "About to run a command optimizing the download mirrors for Manjaro"
  sudo pacman-mirrors -f 0 && sudo pacman -Syy
  clear
  echo -e "Mirrors have been optimized and updated, successfully "
  userPrompt
}

function manjaroRankMirrorsFastTrack()
{
  clear 
  echo -e "About to run a command optimizing the download mirrors for Manjaro, using the five fastest detected mirrors"
  sudo pacman-mirrors -f 5 && sudo pacman -Syy
   clear
  echo -e "Mirrors have been optimized and updated, successfully "
  userPrompt
}

## Do not use 
function manjaroOptDBSpeed()
{
  #clear
  #echo -e "Attention: This command defragments Pacman's database, which boosts performance on slow hard drives but is harmful on SSDs. So, DO NOT use this command on SSDs! "
  #userPrompt 

  #sudo pacman-optimize && sync
  #userPrompt

}
