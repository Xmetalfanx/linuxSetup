. ${functionsDir}/debian/f_debian_sourcelist.cfg

######################################################################
function debianAddUsefulPackages() {

    # some of the extra packages listed are for if "apt-add-repo... " is not working; THIS is needed to add (via scripts)
    packages="synaptic apt-xapian-index policykit-1-gnome software-properties-common dirmngr apt-transport-https lsb-release ca-certificates apt-transport-https dirmngr"

    clear
    fancy_message action "Adding ${packages}"
	userPrompt
    # using installApp here will check and ask ONE BY ONE .. not what i want here
    install "${packages}"

	clear

}

# Think I found this in a guide
# the check doesn't seem right ... even if i am not getting errors i am not sure this is right-
function debianAddSudoToUser() {
    clear
    checkSudoForUser=$(grep "${USER}" /etc/passwd)

    # if not empty
    if [[ -n "${checkSudoForUser}" ]]; then
        echo -e "It appears ${bold}$USER ${completeReset}already has sudo permissions"
    else
        fancy_message action "Adding sudo permissions to ${USER}"
        adduser ${USER} sudo

        echo -e "${USER} now should have sudo permissions"
    fi

    userPrompt

}

############################################
# sort of a meta function
function debian_contrib_and_nonfree_check() {

    # adds contrib and non-free (if needed) to source list
    sourceListAdd && userPrompt

}

# gets passed ${packages}
function additional_repos_package_addition() {

    # needs non-free and contrib
	debian_contrib_and_nonfree_check

    fancy_message action "Installing ${packages}"
    $install ${packages} && unset ${packages}

}


############################################################################

# Add Firmware related packages
function debianLinuxFirmmare() {
    # needs non-free and contrib
	debianContribAndNonFreeCheck

	clear
    fancy_message action "Installing Firmware related packages"
    installApp "gdebi firmware-linux-free firmware-linux-nonfree"

    userPrompt
}

# Add archive support
# issue: different DE's do better with different "archive" packages
function debianArchiveSupport() {
    # needs non-free and contrib
	debianContribAndNonFreeCheck

	installApp "file-roller rar unrar"
}


#################################################

function batchDebianTasks() {

    optimizeRepo

    debianAddUsefulPackages

    # Add Archive support
    debianArchiveSupport

    # Add Firmware packages
    debianLinuxFirmmare

}
