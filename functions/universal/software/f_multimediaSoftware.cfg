. $uniFunctionDir/software/multimedia/includeMultiSoftwareDir.cfg

#################################################################################################################

function installXNViewMP()
{
	progTitle="XNViewMP"
	progName="XNViewMP"
	progHomepage="https://www.xnview.com/en/xnviewmp/"
	tarballURL="https://download.xnview.com/XnViewMP-linux-x64.tgz"
	appImageURL="https://download.xnview.com/XnView_MP.glibc2.18-x86_64.AppImage"

	# always the newest URL/DEB
	debURL="https://download.xnview.com/XnViewMP-linux-x64.deb"

	iconFile=xnview.png
	menuFile=xnview.desktop

	# Needed for Fedora ... do this first
	# 2022: not sure when (what Fedora version) this was added and if it's still needed
	case $distroBase in
		fedora) $install libnsl ;;
	esac


	case $distroBase in

    	fedora|opensuse)

			packageURL=$appImageURL

			# Download and Extract needed files
			metaExternalDownload $progName $packageURL

			# this will call the function that A) moves what is needed to the custom Programs dir (and set that up IF needed)
			# and offer to create a menu entry
			extractedApp

			;;

    # Manjaro needed specifically?
    solus|arch)
		packageURL=$tarballURL

		# Download and Extract needed files
		metaExternalDownload $progName $packageURL

		clear
		echo -e "$fileNameWEXT"
		userPrompt


		# remove the tarball
		## commented out on purpose
		#echo -e "Removing Downloaded Tarball"
		#rm ~/Downloads/$fileNameWEXT

		# Moves the extracted folder to the Programs
		echo -e "Moving XNViewMP folder to (Custom) Programs folder"
		mv ~/Downloads/$progName ~/Programs/


		execFile=~/Programs/$progName/xnview.sh

		# create menu entry/give user option
		customMenuItemChoice
   		;;

		## The same exact DEB works on Debian and Ubuntu
		debian|ubuntu)

		packageURL=$debURL

		# Download and Extract needed files
		metaExternalDownload $progName $progTitle $packageURL

		;;

		*) return ;;

  esac
  ##############################################################


}
############################################################

function installDeadBeefOpenSUSE(){
	if [ "openSUSEBranch" == "tumbleweed" ]; then
		installApp "deadbeef"
	else ["openSUSEBranch" == "leap" ]; then

		# needed due to only being in CERTAIN leap versions
		case $leapVersion in
			15.2) installApp "deadbeef"
			15.3|15.4)

				packageURL=$deadbeefTar
				metaExternalDownload $programTitle $packageURL
				extractedApp

			*)
				# would i ever get to this point?
				echo -e "Version of OpenSUSE Leap not supported by this script"

		esac
	fi
}


function installDeadbeef()
{
	progName="deadbeef"
	progTitle="DeadBeef Media Player"
	progHomepage="http://deadbeef.sourceforge.net/"

	snapName="deadbeef-vs"
	snapType="classic"

	deadbeefTar=$(curl -s "https://deadbeef.sourceforge.io/download.html" | awk -F \" '/tar.bz/ && /href/ {print $2;exit}' | sed 's/\/download//g')

	clear
	echo -e "Installing $programTitle"

	case $distroBase in

		arch) aurAppInstall "deadbeef"

		userPrompt
		 ;;

		debian|ubuntu)

			# Get DEB link from https://deadbeef.sourceforge.io/download.html

			deadbeefSourceforgeURL="https://sourceforge.net/projects/deadbeef/files/travis/linux/1.8.8/"
			packageURL=$(curl -s "$deadbeefSourceforgeURL" | awk -F \" '/deb/ && /href/ && /https/ {print $6;exit}' | sed 's/\/download//g')

			metaExternalDownload $progName $progTitle $packageURL


			# old way, below
			#packageURL="https://sourceforge.net/projects/deadbeef/files/travis/linux/1.8.8/deadbeef-static_1.8.8-1_amd64.deb"

			clear

			;;

		fedora)

			# Fedora needs RPMFusion first .. .after that it's just "install deadbeef"
			thirdPartyRepoSoftwareNotice

			# Here the repo is added and "refreshed"

			# 2- Install Deadbeef
			installApp "deadbeef"

			return ;;

		opensuse) installDeadBeefOpenSUSE ;;


		solus) installApp "deadbeef" ;;

		*) # The catch-all step
			echo "Deadbeef not installed. You are not (detected to be..) on a supported distro for my scripts" ;;

 	esac

}


##########################################################################
function audioRecorderDebianMenu()
{

	x=1
	while [ $x=1 ]; do

		clear

		echo -e "1. \tInstall DEB Multimedia \"Repo\" and install Audio-Recorder from said repo"


    echo -e "2. \tInstall Snap Version"

		read -p "Your Choice?: " aRecorderDebianChoice

		case $aRecorderDebianChoice in

			1)
				metaInstallSnapSupport
				userPrompt
				;;

			2)
				flatPakSupportInstall
				userPrompt
				;;

			3)	snapCheck
				flatpakCheck
				userPrompt
				;;

		esac
	done

}



function installAudioRecorder()
{

  progName="audio-recorder"
  progTitle="Audio Recorder"
  progHomepage=""


  # Universal Apps
  snapName="audio-recorder"
  snapType="edge"

  case $distroBase in

    arch|fedora|solus)

      echo -e "About to install the snap version of "
      installSnapApp $snapName ;;

    opensuse)

      # audio-recorder is in the Leap 42.3, Leap 15, and TW repos (not pacman, btw )
      installApp audio-recorder ;;

    ubuntu) installAudioRecorderPPA ;;

  esac


}
###################################################################################
# Source: https://github.com/tenacityteam/tenacity-flatpak-nightly/blob/main/README.md
function installTenaCityFlatpak()
{
	#todo; check for flatpak support here

	echo -e "About to install (non-final release) Tenacity Flatpak"
	echo -e "Tenacity is a fork of Audacity"
	flatpak remote-add tenacity oci+https://tenacityteam.github.io/tenacity-flatpak-nightly
	flatpak install tenacity org.tenacityaudio.Tenacity

	echo -e "Tenacity (Audacity fork) is now installed via a flatpak"

}

