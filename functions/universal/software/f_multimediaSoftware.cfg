
#################################################################################################################

function installXNViewMP()
{
  progTitle="XNView MP"
  progName="xnViewMP"
  progHomepage="https://www.xnview.com/en/xnviewmp/"
  tarballURL="https://download.xnview.com/XnViewMP-linux-x64.tgz"
  appImageURL="https://download.xnview.com/XnView_MP.glibc2.17-x86_64.AppImage"

  debURL="https://download.xnview.com/XnViewMP-linux-x64.deb"

  # note to self: other functions move the pwd ... no need for that here

  case $distroBase in

    arch|fedora|opensuse|solus) packageURL=$appImageURL ;; 

    ## The same exact DEB works on Debian and Ubuntu
    debian|ubuntu) packageURL=$debURL ;; 

    *) return ;;

  esac
  ##############################################################

  #############################################################
  case $distroBase in 

    fedora) sudo dnf install libnsl ;; 

  esac 

  metaExternalDownload $progName $packageURL

}
############################################################
############################################################

function installDeadbeef()
{
  progName="deadbeef"
  progTitle="DeadBeef Media Player"
  progHomepage="http://deadbeef.sourceforge.net/"

  snapName="deadbeef-vs"
  snapType="classic"

  clear
  echo -e "Installing $programTitle"

  case $distroBase in

    opensuse|solus|arch)

      # OpenSuse should be ok (Leap and TW), Solus has this in the repos ...
      # Arch should have this without the need for the AUR

      $install deadbeef ;;

    fedora)

      # Fedora needs RPMFusion first .. .after that it's just "install deadbeef"

      # 1 - Check for (install if not there) RPM Fusion
        # this function DOES install it if it's not detected
        # repos are refreshed here too
      thirdPartyRepoCheck

      # 2- Install Deadbeef
      $install deadbeef

      return ;;

    ## Debian added here is a test

    debian|ubuntu)

      # Check for, (+ install if not installed) gdebi since thathandles dependencies better and dpkg -i ends up with dep issues on Debian
      clear
      echo -e "Checking for Gdebi for the install"
      commandCheck gdebi


      # Get DEB link from https://deadbeef.sourceforge.io/download.html

      # deadbeefDEBURL = $(curl -s "https://deadbeef.sourceforge.io/download.html" | grep "deb" | cut -d '"' -f2)

      # Clears the Screen
      clear

      cd ~/Downloads

      # Get the DEB
      echo -e "Downloading the latest Deadbeef DEB file"
      wget $(curl -s "https://deadbeef.sourceforge.io/download.html" | grep "deb" | cut -d '"' -f2) -O deadbeef.deb

      echo -e "Installing Deadbeef Media Player"
      sudo gdebi deadbeef.deb


      # remove the DEB
      echo -e "Removing the Downloaded DEB"
      rm deadbeef.deb

      ;;

    *) # The catch-all step
        echo "Deadbeef not installed. You are not (detected to be..) on a supported distro for my scripts" ;;

  esac

}


##########################################
function tinyMediaManagerInstall
{
  ## Note to self: Java has to be installed
  ## I need to put a check/install if not installed thing in for java/jre

  progTitle="Tiny Media Manager"
  progName="tinyMediaManager"
  progHomepage="https://www.tinymediamanager.org/"
  releaseDomain="http://release.tinymediamanager.org/"
  releaseVersion=$(curl "https://release.tinymediamanager.org/" | grep -m 1 "tar.gz" | cut -d\' -f 2 )

  packageURL="$releaseDomain$releaseVersion"

  # Check for Java, as this app can not run without jre/java
  # Location: f_universalSoftware.cfg file
  
  clear
  echo -e "Checking for Java support"
  checkForJava
  userPrompt 
  
  
  clear
  echo -e "Installing/Downloading/Extracting Tiny Media Manager in your Downloads folder "
  userPrompt
  metaExternalDownload $progName $packageURL
  echo -e "Tiny Media Manager setup and ready to use"
  userPrompt

  # not coded yet anyway so i am commenting out for now 
  #customMenuItemMenu $progName

}
##########################################################################
function audioRecorderDebianMenu()
{

	x=1
	while [ $x=1 ]; do

		clear

		echo -e "1. \tInstall DEB Multimedia \"Repo\" and install Audio-Recorder from said repo"
		
    
    echo -e "2. \tInstall Snap Version"

		read -p "Your Choice?: " aRecorderDebianChoice

		case $aRecorderDebianChoice in

			1)
				metaInstallSnapSupport
				userPrompt
				;;

			2)
				flatPakSupportInstall
				userPrompt
				;;

			3)	snapCheck
				flatpakCheck
				userPrompt
				;;

		esac
	done

}



# Meta Function
function installAudioRecorder()
{

  progName="audio-recorder"
  progTitle="Audio Recorder"
  progHomepage=""


  # Universal Apps
  snapName="audio-recordfer"
  snapType="edge"

  case $distroBase in

    arch|fedora|solus)

      echo -e "About to install the snap version of "
      installSnapApp $snapName ;;

    opensuse)

      # audio-recorder is in the Leap 42.3, Leap 15, and TW repos (not pacman, btw )
      $install audio-recorder ;;

    ubuntu) installAudioRecorderPPA ;;

  esac


}

function installMediaElch
{
    progName="mediaElch"
    progTitle="Media Elch"
    programHomepage="https://www.kvibes.de/mediaelch/"

    # https://github.com/Komet/MediaElch/releases
    packageURL="https://github.com/Komet/MediaElch/releases/download/v2.6.0/MediaElch_2.6.0_linux.AppImage"

    case $distroBase in

      arch|fedora|opensuse|solus|ubuntu)
        metaExternalDownload $progName $packageURL ;;
    esac

}


function celluloidOpenSuse
{
  ## nothing listed in default repos for Leap 15.0 or 15.1 for celluloid or gnome-mpv
    # Multimedia:Apps repos has Celluloid I think

  ## Tumbleweed has celluloid

  case $openSUSEBranch in

    tumbleweed) $install celluloid ;;

    leap)
          if [ "$leapVersion" = "15.0" ]; then
            zypper addrepo https://download.opensuse.org/repositories/multimedia:apps/openSUSE_Leap_15.1/multimedia:apps.repo

          elif [ "$leapVersion" = "15.0" ]; then
            zypper addrepo https://download.opensuse.org/repositories/multimedia:apps/openSUSE_Leap_15.1/multimedia:apps.repo

          fi
          
          $install celluloid
          
          ;;
  esac

  userPrompt

}


# Celluloid is the new name for Gnome-mpv ... I will just go with this
function installCelluloid
{
  clear

  echo -e "Installing Celluloid (formerly Gnome-Mpv)"

  echo -e "DistroBase: " $distroBase
  userPrompt


  case $distroBase in

    arch) $install celluloid ;;

    debian|solus|ubuntu) $install gnome-mpv ;;

    fedora)
        #  if not installed, I THINK the installing of the repo should be done inside this function 
        thirdPartyRepoCheck

        # At this point RPMFusion should be installed and repos refreshed ... if already installed (RPM Fusion), then nothing should change up to here

        $install gnome-mpv 
        
        return ;;

    opensuse)
        celluloidOpenSuse
        return ;;

  esac

  userPrompt

}