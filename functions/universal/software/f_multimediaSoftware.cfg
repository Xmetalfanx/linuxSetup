. $uniFunctionDir/software/multimedia/f_makeMKV.cfg
. $uniFunctionDir/software/multimedia/f_codecs.cfg

#################################################################################################################

function installXNViewMP()
{
  progTitle="XNView MP"
  progName="xnViewMP"
  progHomepage="https://www.xnview.com/en/xnviewmp/"
  tarballURL="https://download.xnview.com/XnViewMP-linux-x64.tgz"
  appImageURL="https://download.xnview.com/XnView_MP.glibc2.17-x86_64.AppImage"

  debURL="https://download.xnview.com/XnViewMP-linux-x64.deb"

  # note to self: other functions move the pwd ... no need for that here

  case $distroBase in

    arch|fedora|opensuse|solus) metaExternalDownload $progName $appImageURL  ;;

    ubuntu) metaExternalDownload $progName $debURL ;;

    *) return ;;

  esac

}
############################################################
############################################################

function installDeadbeef()
{
  progName="deadbeef"
  progTitle="DeadBeef Media Player"
  progHomepage="http://deadbeef.sourceforge.net/"

  snapName="deadbeef-vs"
  snapType="classic"

  clear
  echo -e "Installing $programTitle"

  case $distroBase in

    opensuse|solus|arch)

      # OpenSuse should be ok (Leap and TW), Solus has this in the repos ...
      # Arch should have this without the need for the AUR

      $install deadbeef ;;

    fedora)

      # Fedora needs RPMFusion first .. .after that it's just "install deadbeef"

      # 1 - Check for (install if not there) RPM Fusion
      # this function DOES install it if it's not detected
      # repos are refreshed here too
      thirdPartyRepoCheck

      # 2- Install Deadbeef
      $install deadbeef

      return ;;

    ubuntu)

      # Get DEB link from https://deadbeef.sourceforge.io/download.html

      # deadbeefDEBURL = $(curl -s "https://deadbeef.sourceforge.io/download.html" | grep "deb" | cut -d '"' -f2)

      # Clears the Screen
      clear

      # Get the DEB
      echo -e "Downloading the latest Deadbeef DEB file"
      wget $(curl -s "https://deadbeef.sourceforge.io/download.html" | grep "deb" | cut -d '"' -f2) -O deadbeef.deb

      echo -e "Installing Deadbeef Media Player"
      sudo dpkg -i deadbeef.deb


      # remove the DEB
      echo -e "Removing the Downloaded DEB"
      rm deadbeef.deb

      ;;

    *) # The catch-all step
        echo "Deadbeef not installed. You are not (detected to be..) on a supported distro for my scripts" ;;

  esac

}


##########################################
function tinyMediaManagerInstall
{
  ## Note to self: Java has to be installed
  ## I need to put a check/install if not installed thing in for java/jre

  progTitle="Tiny Media Manager"
  progName="tinyMediaManager"
  progHomepage="https://www.tinymediamanager.org/"
  releaseDomain="http://release.tinymediamanager.org/"
  releaseVersion=$(curl "https://release.tinymediamanager.org/" | grep -m 1 "tar.gz" | cut -d\' -f 2 )

  # Shouldnt i change this to "tarballURL" or something?... "tarURL"
  tarURL="$releaseDomain$releaseVersion"

  # Check for Java, as this app can not run without jre/java
  # Location: f_universalSoftware.cfg file
  checkForJava

  clear

  metaExternalDownload $progName $tarURL

  customMenuItemMenu $progName

}
##########################################################################

# Meta Function
function installAudioRecorder()
{

  progName="audio-recorder"
  progTitle="Audio Recorder"
  progHomepage=""


  # Universal Apps
  snapName="audio-recordfer"
  snapType="edge"

  case $distroBase in

    arch|fedora|solus)

      echo -e "About to install the snap version of "
      installSnapApp $snapName ;;

    opensuse)

      # audio-recorder is in the Leap 42.3, Leap 15, and TW repos (not pacman, btw )
      $install audio-recorder ;;

    ubuntu) installAudioRecorderPPA ;;

  esac


}

function installMediaElch
{
    progName="mediaElch"
    progTitle="Media Elch"
    programHomepage="https://www.kvibes.de/mediaelch/"

    tarURL=""

    # https://github.com/Komet/MediaElch/releases
    appImageURL="https://github.com/Komet/MediaElch/releases/download/v2.6.0/MediaElch_2.6.0_linux.AppImage"

    case $distroBase in

      arch|fedora|opensuse|solus|ubuntu)
        metaExternalDownload $progName $appImageURL ;;
    esac

}


function celluloidOpenSuse
{
  ## nothing listed in default repos for Leap 15.0 or 15.1 for celluloid or gnome-mpv
    # Multimedia:Apps repos has Celluloid I think

  ## Tumbleweed has celluloid

  case $openSUSEBranch in

    tumbleweed) $install celluloid ;;

    leap)
          if [ "$leapVersion" = "15.0" ]; then
            zypper addrepo https://download.opensuse.org/repositories/multimedia:apps/openSUSE_Leap_15.1/multimedia:apps.repo

          elif [ "$leapVersion" = "15.0" ]; then
            zypper addrepo https://download.opensuse.org/repositories/multimedia:apps/openSUSE_Leap_15.1/multimedia:apps.repo

          fi
          
          $install celluloid
          
          ;;
  esac

  userPrompt

}


# Celluloid is the new name for Gnome-mpv ... I will just go with this
function installCelluloid
{
  clear

  echo -e "Installing Celluloid (formerly Gnome-Mpv)"


  case $distroBase in

    arch) $install celluloid ;;

    fedora)
        # RPMFusion needed
        return ;;

    opensuse)
        celluloidOpenSuse


        return ;;

    solus)
        # not sure
        return ;;

    ubuntu) $install gnome-mpv ;;


  esac

   userPrompt
}