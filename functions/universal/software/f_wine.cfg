
## Adds Wine keys for ALL Ubuntu based installs
function addWineKey()
{
	case $distroBase in

	ubuntu)
		# Only displays this message on Ubuntu

		# Source: https://wiki.winehq.org/Ubuntu
		echo -e "The WineHQ repository key was changed on 2018-12-19. If you downloaded and added the key before that time, you will need to download and add the new key and run sudo apt update to accept the repository changes."

  		echo -e "Beginning with Wine 4.5, the wine-devel packages for Ubuntu 18.04 and 18.10 require libfaudio0 as a dependency. Since the distro does not provide it, libfaudio0 packages can be downloaded from the OBS. See https://forum.winehq.org/viewtopic.php?f=8&t=32192 for details"

  		clear
		;;

	esac


     # 1 - Architecture
    echo -e "Added needed Architecture"
    sudo dpkg --add-architecture i386

    # 2 - Add Wine key
    echo -e "Adding Wine Key"

	case $distroBase in

		debian) wget -qO - https://dl.winehq.org/wine-builds/winehq.key | sudo apt-key add -
			;;

		ubuntu)
			wget -nc https://dl.winehq.org/wine-builds/winehq.key
			sudo apt-key add winehq.key
			;;

	esac

	echo -e "Wine Key added "


}

. $uniFunctionDir/software/wine/includeWineCfg.cfg



######################################################################################
## The Meta Wine Function

function installPlayOnLinux()
{
  echo -e "Installing PlayonLinux"
  case $distroBase in
    opensuse) $install PlayOnLinux ;;

    arch|debian|fedora|solus|ubuntu) $install playonlinux ;;

  esac
}

# Function name could be more descriptive
# This is the same code for Debian or Ubuntu (hence why I moved it here to the "Global" WINE file )
function wineDefaultInstall()
{

	echo -e "Installing W.I.N.E. from the current repos for your distro"
	sudo apt install wine64

	case $distroBase in 

		debian) 

		# Add 32bit Architecture
		sudo dpkg --add-architecture i386

		# Update Repos 
		# note to self: Shorten this later 
		sudo apt update 

		sudo apt install wine32


	esac

	# Note: this is not really needed as the only "case" (for the package name) issue is in Opensuse
	# I will use this function for other distros ... I am using this here vs "$install playonlinux", for consistancy sake
	installPlayOnLinux

}





## Meta install function?
## if so change this to wineMetaInstall
function installWine()
{
    programName="Wine Emulator"
    programHomepage="http://www.winehq.com"


    # Install wine
    clear
    echo -e "Installing Wine"

    case $distroBase in

		arch|fedora|opensuse|solus)
			# Wine is in the default repos
			$install "wine" ;;

		debian) wineDebianInstallPrompt ;;

    	ubuntu) wineUbuntuInstallPrompt ;;

    esac

    #  Install PlayonLinux
	# This is a function that handles the difference (there is a case issue) that is in OpenSuse
    installPlayOnLinux

}