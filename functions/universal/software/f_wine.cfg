. $uniFunctionDir/software/wine/includeWineCfg.cfg

###################################################################################

## Adds Wine keys for ALL Ubuntu based installs
function addUbuntuWineKeys()
{
  # Source: https://wiki.winehq.org/Ubuntu

  echo -e "The WineHQ repository key was changed on 2018-12-19. If you downloaded and added the key before that time, you will need to download and add the new key and run sudo apt update to accept the repository changes."

  echo -e "Beginning with Wine 4.5, the wine-devel packages for Ubuntu 18.04 and 18.10 require libfaudio0 as a dependency. Since the distro does not provide it, libfaudio0 packages can be downloaded from the OBS. See https://forum.winehq.org/viewtopic.php?f=8&t=32192 for details"

  clear
  # Add architecture
  sudo dpkg --add-architecture i386

  # Add Key
  wget -nc https://dl.winehq.org/wine-builds/winehq.key
  sudo apt-key add winehq.key

}

######################################################################################
## The Meta Wine Function

function playOnLinux()
{
  echo -e "Installing PlayonLinux"
  case $distroBase in
    opensuse) $install PlayOnLinux ;;

    arch|debian|fedora|solus|ubuntu) $install playonlinux ;;

  esac
}

## Meta install function?
## if so change this to wineMetaInstall 
function wineInstall()
{
    programName="Wine Emulator"
    programHomepage="http://www.winehq.com"

    # this will not work in all cases as some distros use "wine-stable" or "wine-developement"
    packageNames="wine"

    # Install wine
    clear
    echo -e "Installing Wine"

    case $distroBase in

      arch|debian|fedora|opensuse|solus)  # Wine is in the default repos
        $install $packageName ;;

      ubuntu)
        # Add Key
        addUbuntuWineKeys

        if [ $distroBase = "ubuntu" ]; then
            # Add Repos
            wineUbuntuRepos

        # Linux Mint Checks - idea is there is no need to go threw the ubuntu section, if the distro is clearly Mint
        elif [ $lsbDistribID = "LinuxMint" ]; then

            # Add Repos
            wineLinuxMintRepo

        fi

        #refresh/install once repos are added
        wineUbuntuBasedInstall

        ;;

      *) echo -e "Error detecting distro, W.I.N.E. not installed"

    esac

    #  Install PlayonLinux
    playOnLinux

}