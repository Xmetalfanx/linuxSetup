# include sublimetext functios 
. /productivity/f_sublimeText.cfg 


function installAtom
{

  ## If the RPM is needed for Fedora and Suse ... can I combine the two?
  echo "Downloading and Installing the Atom Text Editor"

  if [ "$distroBase" == 'ubuntu' ]; then

    curl -o atom.deb https://atom.io/download/deb

    clear
    dpkgInstall atom.deb

  	echo "Atom Text Editor installed"

    ## Cleanup
    rm atom.deb

    clear

  elif [ "$distroBase" == 'fedora' ]; then
      # Placeholder 
      # if this is an RPM download way of doing it ... couldn't the OpenSuse and Fedora code be merged? 
      return 

  elif [ "$distroBase" == 'opennsuse' ]; then
    curl -o atom.rpm https://atom.io/download/rpm

    ## ?? Don't I need to install lsb first due to errors?
    #this is obviously not done

  elif [ "$distroBase" == 'arch' ]; then
      # is Atom in the default repos? 

      return 
  else
     echo "FILLER TEXT FOR NOW ... "
  fi

}


###################################################
### Sublime Text Related

###  Menu and Key related functions

function sublimetextMenu
{
  ## Determine if the user rather use the stable OR the dev branch
  s=1

  while [ $s=1 ]; do

    echo -e "Please Select the branch you want to use \n"

    echo -e   "S. \t Sublime-Text Stable"
    echo -e   "D. \t Sublime-Text Dev(eloper)"

    echo -e   "q. \t Exit to Prompt \n\n"
    read -p   "Your Choice?:" sublimeSelection

    case $sublimeSelection in

      [sS]) sublimebranch=stable
            return
            ;;
      [dD]) sublimebranch=dev
            return
            ;;

      *) invalidSection
          s=1
          ;;

      esac
    done

}

##########################################################################################
function sublimeTextKeys
{

  echo -e "Installing the GPG key"

    if [ "$distroBase" == 'ubuntu' ]; then
      wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
      echo -e "GPG Key for Sumblime-Text is Installed"

    # IF THE LINES for openSuse and Fedora are the same ... why not combine them?
    elif [ "$distroBase" == 'fedora' ] || [ "$distroBase" == 'opennsuse' ]; then
      sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg
      echo -e "GPG Key for Sumblime-Text is Installed"
      
    elif [ "$distroBase" == 'arch' ]; then
      curl -O https://download.sublimetext.com/sublimehq-pub.gpg && sudo pacman-key --add sublimehq-pub.gpg && sudo pacman-key --lsign-key 8A8F901A && rm sublimehq-pub.
    else
      echo -e "Sublime-Text Key has NOT been added/installed"
  fi


 }
