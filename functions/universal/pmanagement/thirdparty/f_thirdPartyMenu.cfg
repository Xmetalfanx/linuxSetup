
# this is copy pasted and the other function still exists for now
# location: f_customMenuItems.cfg in the root of /functions
function clearDesktopFileItems() {
  clear

	# both are needed
  # if the entries are not zero
	if [  -n "${execLineCheck}" ] || [  -n "${iconLineCheck}" ]; then 
    clear 
   
    fancy_message action "Removing any possible leftover data in .desktop file for ${programName}"

    # Removes existing menu line 
    sed -i "/Icon=/d" ${localMenuFile} && sed -i "/Exec=/d" ${localMenuFile} && checkLastCommandStatus "Menu file cleared" "Menu file not cleared"

    userPrompt
  fi 

}



# seperate function to check if the exec= and icon= lines exist
# if found it should not be cleared ... that would be code that should be elsewhere 
function checkMenuFile() {

  fancy_message action "Checking Menu files for existing data that may cause issues"

  execLineCheck=$(awk '/^Exec/ && /.sh$/ {print}' "${@}")
  iconLineCheck=$(awk '/^Icon/ && /(.png|.svg)$/ {print}' "${@}")

}

# this adds custom entries to the menu (.desktop) file
function populateMenuFile() {

  echo -e "${execPath}"
  echo -e "${iconPath}"
  exist


  # TODO: add check for existing exec= and icon= content
	#clear
	fancy_message action "Adding Exec= line, to menu file"
  
	# where am i doing this?  shouldn't this be moved somewhere first?
	echo -e "${execPath}" >> "${movedMenuFile}"

	fancy_message action "Adding IconFile= line, to menu file"
	echo -e "${iconPath}" >> "${movedMenuFile}"

  # Check for what i just did working ... DO NOT clear the entries if found 

}


# 1 - Checks for existing entries in the menu file 
# 2 - desktop-file-install's menu file 
# 3 - update-desktop-datebase
function metaInstallMenuFile() {

  # check to make sure desktop file is in the right place and has the correct lines should be here 

	fancy_message action "Installing ${programName} Menu file"
	sudo desktop-file-install "${movedMenuFile}"

	fancy_message action "Updating Desktop Database"

	sudo update-desktop-database

	userPrompt

}

# call this, not the other two menu functins 
function metaMenuFile() {
    
  checkMenuFile "${localMenuFile}"

  clearDesktopFileItems

  # copy menu file 
  fancy_message action "Copying ${programTitle} over to $finalDownloadLocation}"
  cp ${localMenuFile} ${finalDownloadLocation}

  # Populate Menu file with info from the new path from step 2
  populateMenuFile

  # Installs the Menu file
  # metaInstallMenuFile

}
