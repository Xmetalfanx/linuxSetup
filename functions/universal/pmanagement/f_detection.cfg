# 2019 update: this all seems to be related to "if a package is installed"


#########################################################################################
## This is for the meta function (??) below ... if its Ubuntu's base that is detected .. this will get called vs having all this code in the other function 
#############################################################################################

## does/can this work for packages or commands? 
function detectStatus()
{
    # $1 is a packageName
    # I use packageName as the var but it may be "commandName" too, in usage 

    # package is installed? 
    # Echo's are just for testing .. 

    # November 2019 update: can i switch $1 to $@ ? ... does that even make sense? 

    if [ "$(locate $1)" ]; then 
        echo -e "Command or Package $1, found on this system"
        return
    else
        echo -e "Command or Package $1 is not detected"
        $install $1
    fi

}

#####################################################################################
## overcomplicated, I think ... 
function oldDetectPackageStatus()
{
  # $1 is the package you want info on
  
  if [ "$distroBase" == 'ubuntu' ]; then
      # $1, here = the package you want info on

      ## Clear Var if it was assigned a value before
      unset packageStatus

      ubuntuPackageStatus=$(dpkg -l | grep $1)

      # IF package IS installed 
      
      if [ -z "$ubuntuPackageStatus" ]; then
          packageStatus=false
      else
          packageStatus=true
      fi 

  elif [ "$distroBase" == 'fedora' ] || [ "$distroBase" == 'opensuse' ]; then
     
     rpmPackage=$(rpm -q $1)

      ## Package not installed 
      if [ "$rpmPackage" == "package $1 is not installed" ]; then 
        packageStatus=false
      else
        packageStatus=true
      fi
      return 

  elif [ "$distroBase" == 'arch' ]; then
     
      archPkgStatus="pacman -Qi $1 &> /dev/null"

      ## Fill this out more later
      if [ "$archPkgStatus" == "error: package $1 was not found" ]; then
        packageStatus=false
      else
        packageStatus=true
      fi

    elif [ "$distroBase" == 'solus' ]; then

      solusPkgDetection=$(eopkg li | grep $1)

    ## TEST ONLY 
    #clear
    #echo -e "solusPkgDetection:$solusPkgDetection"
    #userPrompt

      if [ -z "$solusPkgDetection" ]; then
        packageStatus=false
      else
        packageStatus=true
      fi

      return 

    else
       echo "package detection function - FAILED"
    fi


}


#################################################################################
