###########################################################################################
## Start Ubuntu related section 

function ubuntuUpdate
{
    ## The purpose of this is to refresh the repos WITHOUT HAVING TO do an upgrade too

    clear
    echo -e "Refreshing Repo List"
    userPrompt

    if [ "$(command -v apt)" ]; then
      sudo apt update

    elif [ "$(command -v apt-get)" ]; then
      sudo apt-get update
        
    fi

    echo "Repos Refreshed"
    clear

}


function ubuntuUpgrade
{
    # Refresh Repos 
    ubuntuUpdate

    #########################################
    # Do the upgrade 

    if [ "$(command -v apt)" ]; then

      sudo apt upgrade

    elif [ "$(command -v apt-get)" ]; then
      sudo apt-get upgrade
    fi

   echo -e "System Updated \n\n"
}

## End Ubuntu Sectipn 
###################################################################################


###################################################################################
## For OpenSuse

function refreshRepoSuse
{
  # refreshes repo ... does NOT do an update 
  clear
  echo "Refreshing OpenSuse Repositories"
  sudo zypper ref 
  clear
  echo "Repostories Refreshed"
}


function suseUpgrade
{
		## Pass TO THIS function by a universal function seems to be the way to do it ... though this code may be better IN that function ... 
    clear
    echo -e "Updating OpenSuse - Note: you may have to scroll down and agree to the agreement for this to work\n\n"
    echo -e "You May also have to decide to trust or not trust a third party repo\n"
    # Keep This
    userPrompt


    # No need to call ref function here since 'zypper up' ALREADY refreshes the repos 

    #Would a pass to the universal Updater function be more appropriate here? 
    sudo zypper up
		echo "OpenSuse Update Complete"
    echo 
    echo "IF you see that zypper is NOT upgrading something, that may be normal ... sometimes a more updated package in a different repo is found but since you did not give that other repo a higher PRIORITY, those newer versions will be heald back"
    
    userPrompt
    

    clear
}



##### The functions above should only be called by the meta function, below ..



#####################################
function universalUpgrade()
{

  clear

  if [ "$distroBase" == 'ubuntu' ]; then
    ubuntuUpgrade

  elif [ "$distroBase" == 'fedora' ]; then
      clear
        echo "About to upgrade Fedora to latest packages"
        userPrompt
        sudo dnf check-upgrade

      clear

  elif [ "$distroBase" == 'opensuse' ]; then
      suseUpgrade

  elif [ "$distroBase" == 'arch' ]; then
      sudo pacman -Syyu

  elif [ "$distroBase" == 'solus' ]; then 
    echo -e "Updating Solus via eopkg"
    sudo eopkg up

  else
      echo -e "(Test message only) Else condition reached"
      userPrompt
      clear 

      #the idea is to exit the function NOT JUST the if statement
      ## I do not want the output of writing the last upgraded date being recorded IF there was nothing done 
  fi

  
  # Function call to log info 
  logUpgradeInfo

  echo -e "System Up-to-date"
  userPrompt

}