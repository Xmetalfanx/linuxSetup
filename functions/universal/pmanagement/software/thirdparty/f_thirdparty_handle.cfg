# "include" for f_thirdparty_handle.cfg MAY need to be put here 



# Checks for the final location in /home/$USER/Programs
function handleDownloaded_CheckExtractedFolder() {

	# check for extracted download dir
	case ${fileEXT} in
		tar|tar.bz2|tar.gz|tar.xz|tgz)
			fancy_message action "Checking for ${finalProgramLocation} directory"

			[ ! -d "${finalProgramLocation}" ] && fancy_message info "Making Directory ${finalProgramLocation}" && mkdir -p ${finalProgramLocation} || fancy_message info "Directory ${finalProgramLocation} already exists" || userPrompt

	esac
}


# handles downloaded files after downloaded
# ? semi-meta function ?
function handleDownloaded() {

	echo "Handling Download"

	# idea for apps i need to extract to ~/Programs/$programName
		# ?? 2025: should i change this based on things i have seen to "~/Applications" over "~/Programs" ?
		# ${programDir} is set in pmanagement.sh... the location is usually /home/$USER/Programs
	finalProgramLocation="${programDir}/${programName}"

	fancy_message action "\nExtracting/Installing $fileNameWEXT"

	# checks for extracted folder and creates it if it doesn't exist, for some file types
	handleDownloaded_CheckExtractedFolder
	

	#cleanupDownloadedFile

}

# I just split this out for better organization in another function ... this case 
# COULD BE under the other case statement there, honestly 
function handle_tar_archives() {
	
	# check to see if finalProgramLocation exists (IT SHOULD at this point)
	[ -d "${finalProgramLocation}" ] && fancy_message info "${finalProgramLocation} location does exist"  || fancy_message info "${finalProgramLocation} does not exist, Creating {finalProgramLocation}" || mkdir -p "${finalProgramLocation}"
	;; 

	case "${mime_type}" in
		application/x-gzip|application/gzip) 
			tar -zxvf "${downloaded_file}" -C "${finalProgramLocation}" ;;
		application/x-bzip2) tar -jxvf "${downloaded_file}" -C "${finalProgramLocation}" ;;
		application/x-xz) tar -xf "${downloaded_file}" -C "${finalProgramLocation}" ;;
		application/x-tar) tar -xvf "${downloaded_file}" -C "${finalProgramLocation}" ;; 
	esac

}
