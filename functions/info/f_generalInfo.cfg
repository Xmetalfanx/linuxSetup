################################################################
# For getting General info ... functions in other files for that should be moved here 

function lsbReleaseInfo()
{ 
  # what if lsb is not installed? 
  
  # Seems like a "Full name"
  lsbDescription=$(lsb_release -sd )
  
  # Release number ... not sure if this varies from distro to distro 
  lsbRelease=$(lsb_release -sr)
  
  # Number spelled out on Fedora
  # Codename on Ubuntu 
  lsbCodename=$(lsb_release -sc)
  
  # more Exact name? ... this could be handy 
  lsbDistribID=$(lsb_release -si)

}

# Gets info from os-release file in the /etc directory 
function osreleaseInfo()
{

  ################################################
  OSRELEASE_NAME=$( cat /etc/os-release | grep "^NAME=" | cut -d '=' -f 2 | sed 's/\"//g' )
  OSRELEASE_IDLIKE=$( cat /etc/os-release | grep "^ID_LIKE=" | cut -d '=' -f 2 | sed 's/\"//g' )
  OSRELEASE_ID=$( cat /etc/os-release | grep "^ID=" | cut -d '=' -f 2 | sed 's/\"//g' )
  OSRELEASE_VERSIONID=$( cat /etc/os-release | grep "^VERSION_ID=" | cut -d '=' -f 2 | sed 's/\"//g')
  OSRELEASE_VERSION=$( cat /etc/os-release | grep "^VERSION=" | cut -d '=' -f 2 | sed 's/\"//g' )

  # Consider this to the Ubuntu specific check function
  OSRELEASE_UBUNTU_CODENAME=$( cat /etc/os-release | grep "^UBUNTU_CODENAME=" | cut -d '=' -f 2 | sed 's/\"//g' )

}

#####################################################################

# yeah ... the funct. name could be better ..
function specificChecks
{
  #function call 
  DEWMCheck


}



function intialChecks 
{
  #check if lsb_release is installed, and OFFER to install it, if it isn't 
  
  # Get info from lsb_release
  echo "Getting info based on lsb-release"
  lsbReleaseInfo

  # Gets info from /etc/os-release
  echo "Getting info from /etc/os-release file "
  osreleaseInfo

  # $id is wrong ... IT's related to osrelease_ID now 
  if [ $(command -v pacman) ] || [ lsbDistribID = "Arch" ] || [ "$id" == 'arch' ] || [ '$id' == 'anarchy' ]; then
      
      
      ## This is ok for Manjaro since the BASE is arch ... it's not saying the DISTRO is arch, here
      distroBase="arch"
      rollingRelease="yes"

      pmanager="sudo pacman"

      install=$pmanager" -S "
      refresh=$pmanager" -$yy"
      upgrade=$pmanager" -Syyu"

    # Fedora
    ## on the third check, doublecheck (no pun) I have the correct file listed 
    ## id may be a changed var ... it's the ID from OS release 
    elif [ $(command -v dnf ) ] || [ lsbDistribID = "Fedora" ] || [ -f /etc/fedora-release ] || [ OSRELEASES_ID = "fedora" ]; then
      distroBase="fedora"
      pmanager="sudo dnf"
      
      install=$pmanager" install"
      refresh=$pmanager" check-update"
      update=$pmanager" upgrade"


    #openSuse
    elif [ $(command -v zypper) ] || [ lsbDistribID = "Opensuse" ] || [  OSRELEASE_IDLIKE = "opensuse suse" ]; then
      distroBase="opensuse"
      pmanager="sudo zypper"

      # Check for branch
      ## Function in /functions/checks/f_openSuseCheck.cfg  
      opensuseCheck

      install=$pmanager" install"
      refresh=$pmanager" refresh"
      update=$pmanager" upgrade"

    # Solus
    elif [ $(command -v eopkg) ] || [ lsbDistribID = "Solus" ] || [ OSRELEASES_ID = "solus" ] || [ OSRELEASE_NAME = "Solus" ] || [ -f /etc/solus-release ]; then

      distroBase="solus"
      rollingrelease="yes"

      pmanager="sudo eopkg"

      install=$pmanager" install"
      refresh=$pmanager" "
      update=$pmanager" up"


    # Ubuntu 
    elif [ lsbDistribID = "Ubuntu" ] || [ OSRELEASE_ID = "ubuntu" ] || [ $(command -v apt) ]; then 
      distroBase="ubuntu"

      ## I want to keep this seperate to account for Debian 
      if [ $(command -v apt ) ]; then
        pmanager="sudo apt"
      elif [ $(command -v apt-get) ]; then 
        pmanager="sudo apt-get"
      fi 

      install=$pmanager" install"
      refresh=$pmanager" update"
      update=$pmanager" upgrade"

      # Send to function to get more info about say Debian vs Ubuntu and what Ubuntu spin it could be 
  
    fi 

    ## Support check function call should be somewhere near here 



  ## Desktop check 
  specificChecks

}