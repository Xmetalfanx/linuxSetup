## This is for the meta function (??) below ... if its Ubuntu's base that is detected .. this will get called vs having all this code in the other function 

#############################################################################################
## This is for the meta function (??) below


function detectPackageStatus
{
   # $1 is the package you want info on
  
  if [ "$distroBase" == 'ubuntu' ]; then
      # $1, here = the package you want info on

      ## Clear Var if it was assigned a value before
      unset packageStatus

      ubuntuPackageStatus=$(dpkg -l | grep $1)

      # IF package IS installed 
      ## later note: I probably should fill this out a bit more to make sure the else means the package IS installed 
      if [ "$ubuntuPackageStatus" == "" ]; then
          packageStatus=false
      else
          packageStatus=true
      fi 

  elif [ "$distroBase" == 'fedora' ] || [ "$distroBase" == 'opennsuse' ]; then
     
     rpmPackage=$(rpm -q $1)

      ## Package not installed 
      if [ "$rpmPackage" == "package $1 is not installed" ]; then 
        packageStatus=false
      else
        packageStatus=true
      fi 

    elif [ "$distroBase" == 'arch' ]; then
        pacman -Qi $1 &> /dev/null

        EXITSTATUS=$?

        ## Fill this out more later
        if [ $EXITSTATUS == 1 ]; then
          packageStatus=false
        elif [ $EXITSTATUS == 0 ]; then
          packageStatus=true
        fi

    elif [ "$distroBase" == 'solus' ]; then

      solusPkgDetection=$(eopkg li | grep $1)

      ## TEST ONLY 
      #clear
      #echo -e "solusPkgDetection:$solusPkgDetection"
      #userPrompt


      if [ "$solusPkgDetection" == '' ]; then
        packageStatus=false
      else
        packageStatus=true
      fi

    else

       echo "FILLER TEXT FOR NOW ... "
    fi


}


#################################################################################


# Test output function
function testOutputFunction
{
  
  if [ "$packageStatus" = false ]; then
    ## Echo just for testing atm 
    echo -e "Package $1 IS NOT installed"

    #installApps $1 
  else
    
  #Echo is a test only 
    echo -e "Package $1 is ALREADY INSTALLED"

    #return
  fi


    # These two lines of from tests only .. .they will be removed 
    userPrompt
    clear

}

##################################################################

function checkPackage
{
  ## Checks of pacakge is installed and if its not install sends data to installApps (Universal Installer) function 

  # Detection function, called
  detectPackageStatus $1

  ## Function for testing only, called 
  testOutputFunction $1


}