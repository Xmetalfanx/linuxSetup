
function AtomInstall
{

  ## If the RPM is needed for Fedora and Suse ... can I combine the two?
  echo "Downloading and Installing the Atom Text Editor"

  if [ "$distroBase" == 'ubuntu' ]; then

    curl -o atom.deb https://atom.io/download/deb

    clear
    dpkgInstall atom.deb

  	echo "Atom Text Editor installed"

    ## Cleanup
    rm atom.deb

    clear

  elif [ "$distroBase" == 'fedora' ]; then
      echo -e "Placeholder"

  elif [ "$distroBase" == 'opennsuse' ]; then
    curl -o atom.rpm https://atom.io/download/rpm

    ## ?? Don't I need to install lsb first due to errors?
    #this is obviously not done

  elif [ "$distroBase" == 'arch' ]; then
      echo -e "Placeholder AUR function needed "
  else
     echo "FILLER TEXT FOR NOW ... "
  fi

}


###################################################
### Sublime Text Related

###  Menu and Key related functions

function sublimetextMenu
{
  ## Determine if the user rather use the stable OR the dev branch
  s=1

  while [ $s=1 ]; do

    echo -e "Please Select the branch you want to use \n"

    echo -e   "S. \t Sublime-Text Stable"
    echo -e   "D. \t Sublime-Text Dev(eloper)"

    echo -e   "q. \t Exit to Prompt \n\n"
    read -p   "Your Choice?:" sublimeSelection

    case $sublimeSelection in

      [sS]) sublimebranch=stable
            return
            ;;
      [dD]) sublimebranch=dev
            return
            ;;

      *) invalidSection
          s=1
          ;;

      esac
    done

}

##########################################################################################
function sublimeTextKeys
{

  echo -e "Installing the GPG key"

    if [ "$distroBase" == 'ubuntu' ]; then
      wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -
      echo -e "GPG Key for Sumblime-Text is Installed"

    # IF THE LINES for openSuse and Fedora are the same ... why not combine them?
    elif [ "$distroBase" == 'fedora' ]; then
      sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg
      echo -e "GPG Key for Sumblime-Text is Installed"

    elif [ "$distroBase" == 'opennsuse' ]; then
      sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg
      echo -e "GPG Key for Sumblime-Text is Installed"

    elif [ "$distroBase" == 'arch' ]; then
      curl -O https://download.sublimetext.com/sublimehq-pub.gpg && sudo pacman-key --add sublimehq-pub.gpg && sudo pacman-key --lsign-key 8A8F901A && rm sublimehq-pub.
    else
      echo -e "Sublime-Text Key has NOT been added/installed"
  fi


 }

#####################################################################################
## Separate functions for each distro base ... hopefully this will make what was nested if-elif statements look clear

function sublimetextInstallUbuntu
{
    ## Including extra package in case its not already installed

    ## this (on Ubuntu based installs anyway) is where the hiccup is ... I tested "sublimebranch" and the var is seen correctly right before the if statement below


      #Select the channel to use:
      if [ "$sublimebranch" == 'stable' ]; then
        #Stable
        echo "deb https://download.sublimetext.com/ apt/stable/" | sudo tee /etc/apt/sources.list.d/sublime-text.list

      elif [ "$sublimebranch" == 'dev' ]; then
        #Dev
        echo "deb https://download.sublimetext.com/ apt/dev/" | sudo tee /etc/apt/sources.list.d/sublime-text.list
      fi

      userPrompt


      ## Update Repos
      clear
      echo "Updating repos"
      sudo apt update

  


}


function sublimetextInstallArch
{

    if [ "sublimebranch" == 'stable' ]; then
      #Stable
      echo -e "\n[sublime-text]\nServer = https://download.sublimetext.com/arch/stable/x86_64" | sudo tee -a /etc/pacman.conf

    elif [ "sublimebranch" == 'dev' ]; then
      #Dev
      echo -e "\n[sublime-text]\nServer = https://download.sublimetext.com/arch/dev/x86_64" | sudo tee -a /etc/pacman.conf
    fi
}


function sublimetextInstallFedora
{

    if [ "sublimebranch" == 'stable' ]; then
      sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo

    elif [ "sublimebranch" == 'dev' ]; then
      sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/dev/x86_64/sublime-text.repo
    fi


}

function sublimetextInstallOpenSuse
{
    if [ "sublimebranch" == 'stable' ]; then
      #Stable
      sudo zypper addrepo -g -f https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo
    elif [ "sublimebranch" == 'dev' ]; then
      #Dev
      sudo zypper addrepo -g -f https://download.sublimetext.com/rpm/dev/x86_64/sublime-text.repo
    fi



}
##############################################################################################
# The so-called "master" function that should be called
function sublimetextInstall
{

  # Call to Menu function
  sublimetextMenu

  ## Test Echo
  echo -e "Back from Sublime Text Menus"


  # Function to get the keys needed
  clear
  echo -e "Adding the keys needed for Sublime Text "
  sublimeTextKeys


  # Check to see what distro is being run and do the appropriate tasks, depending on what is detected
  if [ "$distroBase" == 'ubuntu' ]; then
      sublimetextInstallUbuntu

    elif [ "$distroBase" == 'fedora' ]; then
      sublimetextInstallFedora

    elif [ "$distroBase" == 'opennsuse' ]; then
      sublimetextInstallOpenSuse

    elif [ "$distroBase" == 'arch' ]; then
      sublimetextInstallArch

    else
       echo "FILLER TEXT FOR NOW ... "
    fi

    clear
    installApp sublime-text
    echo -e "Sublime Text Installed"
}


## End Sublime Text Section/Code
#############################################
